pluginManager.withPlugin('jvm-test-suite') {
	testing.suites.withType(JvmTestSuite).configureEach {
		tasks.named(sources.compileJavaTaskName, JavaCompile) {
			javaCompiler = javaToolchains.compilerFor {
				languageVersion = JavaLanguageVersion.of(21)
			}
			options.release = 21
			sourceCompatibility = JavaVersion.VERSION_21
			targetCompatibility = JavaVersion.VERSION_21
		}
	}
}

pluginManager.withPlugin('java-test-fixtures') {
	sourceSets.named('testFixtures') {
		tasks.named(compileJavaTaskName, JavaCompile) {
			javaCompiler = javaToolchains.compilerFor {
				languageVersion = JavaLanguageVersion.of(21)
			}
			options.release = 21
			sourceCompatibility = JavaVersion.VERSION_21
			targetCompatibility = JavaVersion.VERSION_21
		}
	}
}
